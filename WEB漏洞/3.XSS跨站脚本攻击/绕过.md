HTTP-ONLY：只能防止XSS攻击获取cookie



1.session验证

可以让对方访问phpinfo()，phpinfo中会显示PHPSESSID

如，XSS工具跳转功能使其跳转到phpinfo页面，再利用显示源码功能得到含有PHPSESSID的一栏

<img src="E:\AppData\Roaming\Typora\typora-user-images\image-20230429171242174.png" alt="image-20230429171242174" style="zoom:50%;" />

2.http-only，此时表现为cookie为空

通过获取账号密码来绕过

​	1.浏览器未保存：表单劫持（必须在登录界面login界面）

​	2.浏览器保存账号密码：获取保存的账号密码（可以再非登录界面）



XSSlab防护&绕过：

1.输入.htmlspecialchars(接受变量)将输入转化为html实体，<转为& lt; >转为& gt;(无空格)：input框中value="输入"，需要将""闭合，闭合前一个即可，令其执行js

2.<>被过滤，利用表单任意栏都有onclick属性，onclick"输入"，执行时不需要<>

3.onclick也过滤，写一个跳转标签<a href='javascript:alert(1)'>，传完后，点击图片，执行js

4.data

5.src

6.大小写（正则表达式 比 单纯过滤更好）

7.循环过滤

8.编码绕过，编码成&#两个数字;

9.注释绕过，//为html注释

10.设置输入必须为连接时，检测是否包含http://，直接吧http://加在js后即可

11.type=hidden，被隐藏后无法触发点击。可以输入时加上type='text'，因为以后面为准

12.接收数据包中referer的值，则将输入放到referer下

（涉及CSRF，referer为检测数据包来源的域名，用于防止CSRF。

CSRF：跨站请求伪造。设计一个请求，受害者点击即会发送请求，从而访问请求指向的网站进行url中已经设置的某动作，如果受害者为该网站的管理员，就可以实现...）



WAF绕过：

判断拦截的是哪部分：

<>、javascript、onclick、

为了让其访问js中的网站，需要闭合<，可在语句后加入干扰字符，最后用>闭合

1.标签语法替换

实现功能的标签很多，比如a-href、img-src、input-onclick、img-onerror等

2.特殊符号干扰

js中，#、/，常用来干扰，因为 / 常起到结束作用，如</script>

还有@$等

3.提交方式更改

get、post等

不过要看对方的接受方法，比如$_ GET接收get，$_REQUEST

4.垃圾数据溢出

5.加密解密算法

url编码成%...

6.其他漏洞绕过



xssfuzzer.com/fuzzer.html：自动生成测试语句

xwaf：waf自动绕过

XSStrike工具

fuzzdb、fuzzdict字典库

java xss平台练习：https://gitee.com/yhtmxl/imxss



安全修复：

PHP：http://www.zuimoge.com/212.html

java：https://www.cnblogs.com/baixiansheng/p/9001522.html

输入过滤，输出过滤，httponly



