靶场：https://www.t00ls.net/articles-41070.html

## CSRF

跨站请求伪造

### 原理

受害者登录某网站

攻击者知道网站的请求包构造（通常是本地自己搭建一个一样的源码网站，自己看自己的数据包）

攻击者构造请求包，在自己的服务器（bp可以生成CSRF的服务器端html）

受害者访问攻击者的服务器

服务器发送带有受害者指纹信息的数据包

实现攻击（大部分都是用来修改信息、添加用户等）

### 案例

### 漏洞检测

### 漏洞防御

1.设置随机token

2.检测referer，“同源策略”，host和referer同源

绕过：可以通过抓包修改



## SSRF

服务器端请求伪造

![image-20230430161156747](E:\AppData\Roaming\Typora\typora-user-images\image-20230430161156747.png)

### 目标

外网无法访问的内网系统

### 危害

可大可小

各个协议调用探针：http，fille，dict，ftp，gopher等

eg. http://192.168.64.144/phpmyadmin/

file:///D:/www.txt（访问本地文件）

dict://192.168.64.144:3306/info

ftp://192.168.64.144:21

可进行 端口扫描，指纹识别，漏洞利用，内网探针等

### 漏洞发现

#### 1.从web功能上找

- 上传图片之远程图片

上传图片分为本地上传和远程上传

输入内网地址，通过返回信息，判断ip和端口开放，如192.168.....，3306端口

#### 2.从url关键字找



![image-20230430163033386](E:\AppData\Roaming\Typora\typora-user-images\image-20230430163033386.png)

（最后一列asp.net）



